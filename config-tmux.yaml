# -----------------------------------------------------------------------------
# SAFETY CONFIGURATION
# Use 'whitelist_patterns' to match the internal key seen in /config
# -----------------------------------------------------------------------------

whitelist_patterns:
# Navigation & File Listing
  - "^ls($| .*)"             # List files
  - "^ll($| .*)"
  - "^pwd$"                  # Print working directory
  - "^cd($| .*)"             # Change directory (safe navigation)
  - "^cat($| .*)"            # Read file content
  - "^find .* -type f.*"     # Find files (read-only check)

  # System Status & Info
  - "^date$"                 # Check date
  - "^whoami$"               # Check user
  - "^uptime$"               # Check system uptime
  - "^free($| .*)"           # Check memory
  - "^df($| .*)"             # Check disk space
  - "^du($| .*)"             # Check disk usage
  - "^top($| .*)"            # Process monitor (interactive but safe to start)
  - "^htop($| .*)"           # Process monitor

  # Git (Read-only operations)
  - "^git status.*"
  - "^git log.*"
  - "^git diff.*"
  - "^git show.*"
  - "^git branch$"
  - "^git remote -v"

  # Networking (Info only)
  - "^ping -c [0-9]+ .*"     # Ping (safe if count is limited)
  - "^curl -I .*"            # Curl headers only
  - "^ip addr.*"             # Check IP addresses
  - "^ifconfig.*"

  # Text Processing & Analysis (Safe filters)
  - "^grep .*"
  - "^echo .*"
  - "^head($| .*)"            # View file beginning
  - "^tail($| .*)"            # View file end
  - "^wc($| .*)"              # Word/line/character count
  - "^sort($| .*)"            # Sort content
  - "^uniq($| .*)"            # Remove duplicates
  - "^awk .*"                 # Text processing
  - "^sed -n .*"              # Stream editor (read-only with -n flag)
blacklist_patterns:
  # Destructive File Operations
  - "^rm .*"                 # Remove files
  - "^rm -rf .*"             # Force recursive remove (DANGER)
  - "^dd .*"                 # Disk dump (can wipe drives)
  - "^mkfs.*"                # Format filesystem
  - "^shred .*"              # Secure delete

  # Permissions & Ownership
  - "^chmod .*"              # Change mode
  - "^chown .*"              # Change owner

  # System State
  - "^shutdown.*"
  - "^reboot.*"
  - "^init [0-6]"
  - "^kill .*"               # Killing processes
  - "^killall .*"
  # Dangerous Redirection
  - ".*> /dev/sd.*"          # Writing directly to a raw device
  - ":(){ :|:& };:"          # Fork bomb pattern

# -----------------------------------------------------------------------------
# MODEL CONFIGURATION
# -----------------------------------------------------------------------------
models:
  primary:
    provider: openrouter
    base_url: "https://api.mistral.ai/v1"
    api_key: "GMkftRfD4xFCQ9mcLOSvesaDXdmCRB55"
    model: "devstral-latest"
# -----------------------------------------------------------------------------
# GLOBAL SETTINGS
# -----------------------------------------------------------------------------
debug: false
exec_confirm: true

# -----------------------------------------------------------------------------
# PROMPT SETTINGS
# -----------------------------------------------------------------------------

prompts:
    # Balanced approach: concise for simple commands, detailed for analysis
    base_system: >
      You are an intelligent terminal assistant.
      1. For simple commands (like 'ls', 'cat file.txt', 'git status', 'head', 'tail', 'grep', 'wc'), output ONLY the shell command with no explanation.
      2. ONLY provide analysis when the user's original request contains analysis words like 'analyze', 'explain', 'how', 'what does', 'why', 'troubleshoot', 'debug'. Do NOT explain individual commands that are part of an analysis sequence.
      3. When providing analysis, give ONE comprehensive summary at the end, not explanations for each command. EVERY line of text must start with a `#` character (so it is valid shell syntax).
      4. Do not use markdown formatting like **bold** or `code blocks`.
    chat_assistant: "You are a technical terminal expert. Execute commands without explanation unless the user specifically asks for analysis or explanation. When analysis is requested, provide ONE comprehensive summary rather than explaining each individual command."
    chat_assistant_prepared: "You are an intelligent CLI assistant. The user prompt contains context: 'user@host:cwd[exit_code]'. If exit_code â‰  0, provide debugging help. Otherwise, execute commands without explanation unless analysis is explicitly requested."
